<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../headers.ejs') %>
    <style type="text/css" media="screen">
        #devices-template {
            position: relative;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>

<body class="bg-gray-200">
    <a class="skip-link" href="#maincontent">Skip to main</a>
     <%- include('../add-ons/preloader.ejs') %>
    <div>
        <nav class="bg-gray-800 fixed w-full top-0 inset-x-0">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <img class="h-8 w-8" src="https://tailwindui.com/img/logos/workflow-mark-on-dark.svg"
                                alt="Workflow logo">
                        </div>
                        <div class="hidden md:block">
                            <div class="ml-10 flex items-baseline space-x-4">
                                <a href="/dashboard/<%= projectID %>"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">Monitor</a>

                                <a href="/activity/<%= projectID %>"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">Activity</a>

                                <div href="#" onmouseover="$('.onboardFlyout').show()"
                                    onmouseleave="$('.onboardFlyout').hide()"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">
                                    Onboard
                                    <div
                                        class=" w-48 -ml-16 rounded-lg bg-white z-10 absolute mt-3 shadow-lg onboardFlyout hidden animate__animated animate__fadeIn animate__faster">
                                        <ul class="text-black m-0">
                                            <a href="/dashboard/connIntro/<%= projectID %>">
                                                <li
                                                    class="w-full p-3 rounded-lg border-b border-gray-200 hover:bg-gray-200">
                                                    Get started</li>
                                            </a>
                                            <li class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                Provisioning templates</li>
                                        </ul>
                                    </div>
                                </div>

                                <div href="#" onmouseover="$('.manageFlyout').show()"
                                    onmouseleave="$('.manageFlyout').hide()"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">
                                    Manage
                                    <div
                                        class=" w-48 -ml-16 rounded-lg bg-white z-10 absolute mt-3 shadow-lg manageFlyout hidden animate__animated animate__fadeIn animate__faster">
                                        <ul class="text-black m-0">
                                            <a href="/devices/<%= projectID %>">
                                                <li
                                                    class="w-full p-3 rounded-lg border-b border-gray-200 hover:bg-gray-200">
                                                    Devices</li>
                                            </a>
                                            <li class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                Types</li>
                                            <li class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                Device groups</li>
                                        </ul>
                                    </div>
                                </div>

                                <div href="#" onmouseover="$('.secureFlyout').show()"
                                    onmouseleave="$('.secureFlyout').hide()"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">
                                    Secure
                                    <div
                                        class=" w-48 -ml-16 rounded-lg bg-white z-10 absolute mt-3 shadow-lg secureFlyout hidden animate__animated animate__fadeIn animate__faster">
                                        <ul class="text-black m-0">
                                            <a href="/certificates/<%= projectID %>">
                                                <li
                                                    class="w-full p-3 rounded-lg border-b border-gray-200 hover:bg-gray-200">
                                                    Certificates</li>
                                            </a>
                                            <a href="/policy/<%= projectID %>">
                                                <li
                                                    class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                    Policies</li>
                                            </a>
                                            <li class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                Authorizers</li>
                                        </ul>
                                    </div>
                                </div>

                                <a href="#" onmouseover="$('.defendFlyout').show()"
                                    onmouseleave="$('.defendFlyout').hide()"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">Defend
                                    <div
                                        class=" w-48 -ml-16 rounded-lg bg-white z-10 absolute mt-3 shadow-lg defendFlyout hidden animate__animated animate__fadeIn animate__faster">
                                        <ul class="text-black m-0">
                                            <li
                                                class="w-full p-3 rounded-lg border-b border-gray-200 hover:bg-gray-200">
                                                Certificates</li>
                                            <li class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                Policies</li>
                                            <li class="w-full p-3 rounded border-b border-gray-200 hover:bg-gray-200">
                                                Authorizers</li>
                                        </ul>
                                    </div>
                                </a>

                                <div href="#" onmouseover="$('.actFlyout').show()" onmouseleave="$('.actFlyout').hide()"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">
                                    Act
                                    <div
                                        class=" w-48 -ml-16 rounded-lg bg-white z-10 absolute mt-3 shadow-lg actFlyout hidden animate__animated animate__fadeIn animate__faster">
                                        <ul class="text-black m-0">
                                            <li
                                                class="w-full p-3 rounded-lg border-b border-gray-200 hover:bg-gray-200">
                                                Rules</li>
                                        </ul>
                                    </div>
                                </div>

                                <a href="/test"
                                    class="px-3 py-2 rounded-md text-sm font-medium text-white hover:text-white hover:bg-indigo-400 focus:outline-none focus:text-white focus:bg-gray-700">Test</a>
                            </div>
                        </div>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-4 flex items-center md:ml-6">
                            <!-- Projects Dropdown -->
                            <%- include('../add-ons/project-switch-component.ejs') %>

                            <div class="ml-3 relative">
                                <div>
                                    <button
                                        class="p-1 border-2 border-transparent text-white rounded-full hover:text-white focus:outline-none focus:text-white focus:bg-gray-700 bg-indigo-300"
                                        aria-label="Notifications">
                                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                                        </svg>
                                    </button>

                                    <div class="notification-drawer origin-top-right absolute right-0 mt-2 rounded-md shadow-lg hidden"
                                        style="width:300px;">
                                        <div class="py-1 rounded-md bg-white shadow-xs notif-cont" role="menu"
                                            aria-orientation="vertical" aria-labelledby="user-menu">

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Profile dropdown -->
                            <div class="ml-3 relative">
                                <div>
                                    <button
                                        class="max-w-xs flex items-center text-sm rounded-full text-white focus:outline-none focus:shadow-solid"
                                        id="user-menu" aria-label="User menu" aria-haspopup="true">
                                        <img class="h-8 w-8 rounded-full"
                                            src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                                            alt="">
                                    </button>
                                </div>
                                <!--
                Profile dropdown panel, show/hide based on dropdown state.

                Entering: "transition ease-out duration-100"
                  From: "transform opacity-0 scale-95"
                  To: "transform opacity-100 scale-100"
                Leaving: "transition ease-in duration-75"
                  From: "transform opacity-100 scale-100"
                  To: "transform opacity-0 scale-95"
              -->
                                <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg hidden">
                                    <div class="py-1 rounded-md bg-white shadow-xs" role="menu"
                                        aria-orientation="vertical" aria-labelledby="user-menu">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                            role="menuitem">Your Profile</a>

                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                            role="menuitem">Settings</a>

                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                            role="menuitem">Sign out</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="-mr-2 flex md:hidden">
                        <!-- Mobile menu button -->
                        <button
                            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:bg-gray-700 focus:text-white">
                            <!-- Menu open: "hidden", Menu closed: "block" -->
                            <svg class="block h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                            <!-- Menu open: "block", Menu closed: "hidden" -->
                            <svg class="hidden h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!--
      Mobile menu, toggle classes based on menu state.

      Open: "block", closed: "hidden"
    -->
            <div class="hidden md:hidden">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#"
                        class="block px-3 py-2 rounded-md text-base font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700">Dashboard</a>

                    <a href="#"
                        class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Team</a>

                    <a href="#"
                        class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Projects</a>

                    <a href="#"
                        class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Calendar</a>

                    <a href="#"
                        class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Reports</a>
                </div>
                <div class="pt-4 pb-3 border-t border-gray-700">
                    <div class="flex items-center px-5 space-x-3">
                        <div class="flex-shrink-0">
                            <img class="h-10 w-10 rounded-full"
                                src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                                alt="">
                        </div>
                        <div class="space-y-1">
                            <div class="text-base font-medium leading-none text-white">Tom Cook</div>
                            <div class="text-sm font-medium leading-none text-gray-400">tom@example.com</div>
                        </div>
                    </div>
                    <div class="mt-3 px-2 space-y-1">
                        <a href="#"
                            class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Your
                            Profile</a>

                        <a href="#"
                            class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Settings</a>

                        <a href="#"
                            class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700">Sign
                            out</a>
                    </div>
                </div>
            </div>
        </nav>

        <header class="bg-white shadow mt-16">
            <div class="flex max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
                <h1 class="text-3xl w-full font-semibold leading-tight text-gray-900">
                    Register a device
                </h1>
                <div class="bg-white px-4 flex">
                    <a href="/create/provisioning/<%= projectID %>"
                        class="border border-gray-300 text-black px-4 py-2 rounded mx-1">Cancel</a>
                    <button class="svd-btn border bg-blue-400 text-white px-4 py-2 rounded mx-1 addDevice">Next</button>
                </div>
            </div>
        </header>
        <main>
            <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 flex">
                <!-- Replace with your content -->
                <div class="bg-white shadow overflow-hidden sm:rounded-lg w-1/3 mx-2">
                    <div class="px-4 py-5 border-b border-gray-200 sm:px-6">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">
                            Add your device to the device registry
                        </h3>
                        <p class="mt-1 max-w-2xl text-sm leading-5 text-gray-500">
                            This step creates an entry in the device registry and a device shadow for your device.
                        </p>
                    </div>
                    <div>
                        <dl>
                            <div class="bg-gray-50 px-4 py-5 border-b border-gray-200">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
                                    Name
                                </label>
                                <input
                                    class="shadow appearance-none border rounded w-1/2 py-2 px-3 mb-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline deviceName"
                                    id="deviceName" type="text" placeholder="Give your device a name">
                            </div>
                            <div class="bg-white px-4 py-5">
                                <h3 class="text-lg leading-6 font-medium text-gray-900">
                                    Apply a type to this device
                                </h3>
                                <p class="mt-1 max-w-2xl text-sm leading-5 text-gray-500">
                                    Using a device type simplifies device management by providing consistent registry
                                    data for devices that share a type. Types provide devices with a common set of
                                    attributes, which describe the identity and capabilities of your device, and a
                                    description.
                                </p>
                            </div>
                            <div class="bg-gray-50 px-4 py-5 -mt-4 border-b border-gray-200">
                                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                                    for="grid-state">
                                    Device Type
                                </label>
                                <div class="relative flex w-full mb-3">
                                    <select
                                        class="dts-list block appearance-none w-1/2 bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500 deviceType"
                                        id="grid-state">
                                        <option>No type selected</option>
                                        <% if(deviceTypes == '') { %>
                                        <option>No device type found</option>
                                        <% }else { %>
                                        <% deviceTypes.forEach(type => { %>
                                        <option value="<%= type.resource %>"><%= type.name %></option>
                                        <% })} %>
                                    </select>
                                    <button class="newDeviceType border border-blue-300 rounded text-blue-300 p-2 mx-3
                                        hover:bg-blue-300 hover:text-white">Create
                                        a type</button>
                                </div>
                            </div>
                            <div class="bg-white px-4 py-5">
                                <h3 class="text-lg leading-6 font-medium text-gray-900">
                                    Add this device to a group
                                </h3>
                                <p class="mt-1 max-w-2xl text-sm leading-5 text-gray-500">
                                    Adding your device to a group allows you to manage devices remotely using jobs.
                                </p>
                            </div>
                            <div class="bg-gray-50 px-4 py-5 -mt-4 border-b border-gray-200">
                                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                                    for="grid-state">
                                    Device Group
                                </label>
                                <div class="relative flex w-full mb-3">
                                    <select
                                        class="dg-list block appearance-none w-1/2 bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500 deviceGroup"
                                        id="grid-state">
                                        <option>No type selected</option>
                                        <option>auto</option>
                                    </select>
                                    <button
                                        class="border border-blue-300 rounded text-blue-300 p-2 mx-3 hover:bg-blue-300 hover:text-white">Create
                                        a group</button>
                                </div>
                            </div>
                            <div class="bg-white px-4 py-5 border-b border-gray-200">
                                <h3 class="text-lg leading-6 font-medium text-gray-900">
                                    Add feeds to this device
                                </h3>
                                <div id="devices-feeds" class=" w-full h-32 mt-2 rounded-lg">[{
                                    "dataType": "string",
                                    "name": "Feed Name"
                                    }]</div>
                            </div>
                        </dl>
                    </div>
                </div>
                <div class="bg-white shadow overflow-hidden sm:rounded-lg w-1/3 mx-2 overflow-y-auto"
                    style="height:450px;">
                    <div class="px-4 py-5 border-b border-gray-200 sm:px-6">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">
                            Add certificate for your device
                        </h3>
                        <p class="mt-1 max-w-2xl text-sm leading-5 text-gray-500">
                            A certificate is used to authenticate your device's connection to the platform.
                        </p>
                    </div>
                    <div>
                        <dl>
                            <div class="bg-gray-50 px-4 py-5 border-b border-gray-200">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
                                    One-click certificate creation (recommended)
                                    <br>
                                    <span class="text-sm text-gray-400">This will generate a certificate, public key,
                                        and private key using platforms certificate authority.</span>
                                </label>
                                <br>
                                <button
                                    class="appearance-none border rounded w-64  py-2 px-3 mb-3 text-white bg-blue-400 leading-tight focus:outline-none hover:bg-blue-500">Create
                                    Certificate</button>
                            </div>
                            <div class="bg-white px-4 py-5 border-b border-gray-200">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
                                    Use my certificate
                                    <br>
                                    <span class="text-sm text-gray-400">Register your own CA certificate and use your
                                        own certificates for one or many devices.</span>
                                </label>
                                <br>
                                <button
                                    class="appearance-none border rounded w-64 py-2 px-3 mb-3 text-white bg-blue-400 leading-tight focus:outline-none hover:bg-blue-500">Upload
                                    Certificate</button>
                            </div>
                        </dl>
                    </div>
                </div>
                <!-- /End replace -->
            </div>
        </main>
    </div>
    <div
        class="fixed z-10 inset-0 overflow-y-auto newdeviceTypeModal hidden  animate__animated animate__fadeIn animate__faster">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <!--
      Background overlay, show/hide based on modal state.

      Entering: "ease-out duration-300"
        From: "opacity-0"
        To: "opacity-100"
      Leaving: "ease-in duration-200"
        From: "opacity-100"
        To: "opacity-0"
    -->
            <div class="fixed inset-0 transition-opacity">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>

            <!-- This element is to trick the browser into centering the modal contents. -->
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen"></span>&#8203;
            <!--
      Modal panel, show/hide based on modal state.

      Entering: "ease-out duration-300"
        From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        To: "opacity-100 translate-y-0 sm:scale-100"
      Leaving: "ease-in duration-200"
        From: "opacity-100 translate-y-0 sm:scale-100"
        To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
    -->
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full animate__animated animate__slideInDown animate__faster"
                role="dialog" aria-modal="true" aria-labelledby="modal-headline">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-headline">
                                Create a device type
                            </h3>
                            <div class="mt-2">
                                <p class="text-sm leading-5 text-gray-500">
                                    This will help you organize, categorize, and search for your devices.
                                </p>
                            </div>
                        </div>
                        <div class="bg-white overflow-hidden sm:rounded-lg w-full">
                            <div>
                                <dl>
                                    <div class="bg-gray-50 px-4 py-5">
                                        <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
                                            Name
                                        </label>
                                        <input
                                            class="shadow appearance-none border rounded w-3/5 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                            id="deviceType" type="text" placeholder="Give your device type a name">
                                    </div>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <span class="flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto">
                        <button type="button"
                            class="cdt-btn inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-blue-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                            Create
                        </button>
                    </span>
                    <span class="mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto">
                        <button type="button" class="newDeviceTypeModal inline-flex justify-center w-full rounded-md border border-gray-300 px-4
                        py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500
                        focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out
                        duration-150 sm:text-sm sm:leading-5">
                            Cancel
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>
<%- include('../add-ons/project-switch.ejs') %>
</body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"
    integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q=="
    crossorigin="anonymous"></script>
<script>
    $('.newDeviceType').on('click', () => {
        $(".newdeviceTypeModal").show()
    })

    $(".newDeviceTypeModal").on('click', () => {
        $(".newdeviceTypeModal").hide()
    })
</script>
<script>
    const ownerId = '<%= ownerID %>'

    const feeditor = ace.edit("devices-feeds");
    feeditor.setTheme("ace/theme/monokai");
    feeditor.session.setMode("ace/mode/json");

    $(".cdt-btn").on('click', async () => {
        var deviceTypeName = $("#deviceType").val()

        await fetch('/create/device-type/<%= projectID %>', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                },
                body: JSON.stringify({
                    name: deviceTypeName
                })
            })
            .then(r => r.json())
            .then(data => {
                $(".newdeviceTypeModal").hide()

                $(".dts-list").append(`<option value='${data.resource}'>${deviceTypeName}</option>`)

            })

    })

    $(".svd-btn").on('click', async () => {
        //Save Device
        var name = $("#deviceName").val();
        var type = $(".dts-list").val();
        var group = $(".dg-list").val();
        const feeds = JSON.parse(feeditor.getValue())

        $(".notif-cont").append(`<div class="notification h-16 w-full px-4 py-2 hover:bg-gray-300 flex animate__animated animate__fadeIn animate__faster">
                                                <svg width="24" height="24" viewBox="0 0 24 24" class="w-1/5 mr-6 mt-3 hidden dev-done text-green-500" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M9.00012 12L11.0001 14L15.0001 10M7.83486 4.69705C8.55239 4.63979 9.23358 4.35763 9.78144 3.89075C11.0599 2.80123 12.9403 2.80123 14.2188 3.89075C14.7667 4.35763 15.4478 4.63979 16.1654 4.69705C17.8398 4.83067 19.1695 6.16031 19.3031 7.83474C19.3603 8.55227 19.6425 9.23346 20.1094 9.78132C21.1989 11.0598 21.1989 12.9402 20.1094 14.2187C19.6425 14.7665 19.3603 15.4477 19.3031 16.1653C19.1695 17.8397 17.8398 19.1693 16.1654 19.303C15.4479 19.3602 14.7667 19.6424 14.2188 20.1093C12.9403 21.1988 11.0599 21.1988 9.78144 20.1093C9.23358 19.6424 8.55239 19.3602 7.83486 19.303C6.16043 19.1693 4.83079 17.8397 4.69717 16.1653C4.63991 15.4477 4.35775 14.7665 3.89087 14.2187C2.80135 12.9402 2.80135 11.0598 3.89087 9.78132C4.35775 9.23346 4.63991 8.55227 4.69717 7.83474C4.83079 6.16031 6.16043 4.83067 7.83486 4.69705Z" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <div class="spinner dev-spin w-1/5 mr-6 mt-3"></div>
                                                <div class="w-full">
                                                    <span class="font-semibold text-black dev-notif-title">Creating Device</span>
                                                    <br>
                                                    <span class="text-sm text-black">${name}</span>
                                                </div>
                                            </div>`)

        await fetch('/create/single-device/<%= projectID %>', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
            },
            body: JSON.stringify({
                name,
                type,
                group,
                feeds
            })
        })
        .then(() => {
            setTimeout(() => {
                    $(".dev-done").show()
                    $(".dev-spin").hide()
                    $(".dev-notif-title").html("Device Created : ")
                    setTimeout(() => {
                        window.location.replace('/devices/<%= projectID %>')
                    }, 1500)
                }, 2000)
        })

    })
</script>

</html>